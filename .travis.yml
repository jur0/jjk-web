dist: trusty
sudo: required

env:
    global:
        - HUGO_VERSION=0.37.1
        - PATH=$PATH:node_modules/.bin

install:
    - wget -O /tmp/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.deb
    - sudo dpkg -i /tmp/hugo.deb
    - npm install

script:
    - gulp build-static
    - hugo -v
    - gulp hugo-html-minify

deploy:
    provider: pages
    skip-cleanup: true
    # Publish the directory `public`.
    local-dir: public
    # Use the github token stored in the travis environment
    github_token: $GITHUB_TOKEN
    on:
        branch: travis
